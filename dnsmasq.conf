# dnsmasq.conf - Admin Pro 默认标准配置

# --- 基础 DNS 安全设置 ---
# 不要转发不含点号的简单域名（防止内网域名泄露）
domain-needed
# 不要转发私有 IP 反向解析请求到上游
bogus-priv
# 不使用宿主机的 /etc/resolv.conf
no-resolv
# 不轮询 resolv.conf 的变化
no-poll

# --- 上游 DNS 服务器 ---
# Google Public DNS
server=8.8.8.8
server=8.8.4.4
# Cloudflare DNS
server=1.1.1.1
# 阿里云 DNS (国内解析加速)
server=223.5.5.5

# --- 缓存与性能 ---
# 增加缓存条目 (默认 150)
cache-size=2000
# 不要缓存失败的查询太久
no-negcache

# --- 网络监听设置 ---
# 监听指定接口 (容器内通常为 eth0)
interface=eth0
# 动态绑定接口地址
bind-dynamic

# --- 日志记录 (用于管理面板实时展示) ---
# 记录每一次 DNS 查询
log-queries
# 将日志直接输出到 stdout (便于 Docker 收集)
log-facility=-

# --- 本地网络设置 ---
# 定义本地专用域名后缀
local=/lan/
local=/home.local/
# 设置本地域名
domain=home.local
# 自动将 /etc/hosts 中的主机名扩展为完整域名
expand-hosts

# --- 静态记录示例 (可通过 Web UI 动态管理) ---
# address=/nas.home.local/192.168.1.10